<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.suneee.eas.oa.dao.car.CarInfoDao">    <sql id="column">        a.`carId`,a.`plateNum`,a.`name`,a.`type`,a.`displacement`,a.`color`,a.`seatCount`,a.`identNum`,        a.`fuelLabel`,a.`cardId`,a.`oilConsumption`,a.`picture`,a.`managerId`,a.`managerName`,a.`purchasePrice`,        a.`purchaseDate`,a.`status`,a.`remarks`,a.`enterpriseCode`,a.`isLock`,a.`isDelete`,a.`createBy`,        a.`createTime`,a.`updateBy`,a.`updateTime`, a.`currentMile`,b.`cardNum`    </sql>    <update id="update" parameterType="CarInfo">        UPDATE            oa_car_info        SET            `plateNum` = #{plateNum},            `name` = #{name},            `type` = #{type},            `displacement` = #{displacement},            `color` = #{color},            `seatCount` = #{seatCount},            `identNum` = #{identNum},            `fuelLabel` = #{fuelLabel},            `cardId` = #{cardId},            `oilConsumption` = #{oilConsumption},            `picture` = #{picture},            `managerId` = #{managerId},            `managerName` = #{managerName},            `purchasePrice` = #{purchasePrice},            `purchaseDate` = #{purchaseDate},            `status` = #{status},            `remarks` = #{remarks},            `enterpriseCode` = #{enterpriseCode},            `isLock` = #{isLock},            `isDelete` = #{isDelete},            `createBy` = #{createBy},            `createTime` = #{createTime},            `updateBy` = #{updateBy},            `updateTime` = #{updateTime},            `currentMile` = #{currentMile}        WHERE            `carId` = #{carId}    </update>    <insert id="save" parameterType="CarInfo">        INSERT INTO        oa_car_info (`carId`,`plateNum`,`name`,`type`,`displacement`,`color`,`seatCount`,`identNum`,          `fuelLabel`,`cardId`,`oilConsumption`,`picture`,`managerId`,`managerName`,`purchasePrice`,          `purchaseDate`,`status`,`remarks`,`enterpriseCode`,`isLock`,`isDelete`,`createBy`,`createTime`,          `updateBy`,`updateTime`,`currentMile`        )        VALUES (#{carId},#{plateNum},#{name},#{type},#{displacement},#{color},#{seatCount},#{identNum},          #{fuelLabel},#{cardId},#{oilConsumption},#{picture},#{managerId},#{managerName},#{purchasePrice},          #{purchaseDate},#{status},#{remarks},#{enterpriseCode},#{isLock},#{isDelete},#{createBy},          #{createTime},#{updateBy},#{updateTime},#{currentMile})    </insert>    <select id="findById" parameterType="java.lang.Long" resultType="CarInfo">        SELECT          <include refid="column" />        FROM          oa_car_info a        LEFT JOIN oa_car_oilcard b ON a.cardId = b.cardId AND b.isDelete=0 AND b.`status`=0        WHERE          a.carId = #{carId}    </select>    <select id="list" parameterType="java.util.Map" resultType="CarInfo">        SELECT          <include refid="column" />        FROM          oa_car_info a        LEFT JOIN oa_car_oilcard b ON a.cardId = b.cardId AND b.isDelete=0 AND b.`status`=0        WHERE        a.`isDelete` = 0          <if test="@Ognl@isNotEmpty(enterpriseCode)">              AND a.`enterpriseCode` = #{enterpriseCode}          </if>          <if test="@Ognl@isNotEmpty(searchText)">              AND (              a.`name` LIKE CONCAT("%", #{searchText}, "%")                OR a.`plateNum` LIKE CONCAT("%", #{searchText}, "%")                OR a.`color` LIKE CONCAT("%", #{searchText}, "%")              )          </if>        <if test="@Ognl@isNotEmpty(seatCount)">AND a.seatCount = #{seatCount} </if>        <if test="@Ognl@isNotEmpty(type)">AND a.`type` = #{type} </if>        <if test="@Ognl@isNotEmpty(status)">AND a.`status` = #{status} </if>        <if test="@Ognl@isNotEmpty(isLock)">AND a.`isLock` = #{isLock} </if>        <if test="@Ognl@isNotEmpty(plateNum)">AND a.`plateNum` = #{plateNum} </if>        ORDER BY a.updateTime DESC    </select>    <select id="listAll" parameterType="java.util.Map" resultType="CarInfo">        SELECT        <include refid="column" />        FROM        oa_car_info a        LEFT JOIN oa_car_oilcard b ON a.cardId = b.cardId AND b.isDelete=0 AND b.`status`=0        WHERE 1=1        <if test="@Ognl@isNotEmpty(enterpriseCode)">            AND a.`enterpriseCode` = #{enterpriseCode}        </if>        <if test="@Ognl@isNotEmpty(searchText)">            AND (            a.`name` LIKE CONCAT("%", #{searchText}, "%")            OR a.`plateNum` LIKE CONCAT("%", #{searchText}, "%")            OR a.`color` LIKE CONCAT("%", #{searchText}, "%")            )        </if>        <if test="@Ognl@isNotEmpty(seatCount)">AND a.seatCount = #{seatCount} </if>        <if test="@Ognl@isNotEmpty(type)">AND a.`type` = #{type} </if>        <if test="@Ognl@isNotEmpty(status)">AND a.`status` = #{status} </if>        <if test="@Ognl@isNotEmpty(isLock)">AND a.`isLock` = #{isLock} </if>        <if test="@Ognl@isNotEmpty(plateNum)">AND a.`plateNum` = #{plateNum} </if>        ORDER BY a.updateTime DESC    </select>    <delete id="deleteById" parameterType="java.lang.Long">        DELETE FROM          oa_car_info        WHERE          carId = #{carId}    </delete>    <select id="isPlateNumExist" parameterType="java.util.Map" resultType="java.lang.Long">        SELECT count(1) FROM oa_car_info        WHERE `isDelete` = 0 AND `plateNum`=#{plateNum}        <if test="@Ognl@isNotEmpty(carId)">          AND carId != #{carId}        </if>    </select>    <select id="listFree" parameterType="java.util.Map" resultType="CarInfo">        SELECT        <include refid="column" />        FROM        oa_car_info a        LEFT JOIN oa_car_oilcard b ON a.cardId = b.cardId AND b.isDelete=0 AND b.`status`=0        WHERE        a.`isDelete` = 0 AND a.`status` = 0 AND a.`isLock` = 0        <if test="@Ognl@isNotEmpty(enterpriseCode)">            AND a.`enterpriseCode` = #{enterpriseCode}        </if>        <if test="@Ognl@isNotEmpty(searchText)">            AND (            a.`name` LIKE CONCAT("%", #{searchText}, "%")            OR a.`plateNum` LIKE CONCAT("%", #{searchText}, "%")            OR a.`color` LIKE CONCAT("%", #{searchText}, "%")            )        </if>        <if test="@Ognl@isNotEmpty(seatCount)">AND a.seatCount = #{seatCount} </if>        <if test="@Ognl@isNotEmpty(type)">AND a.`type` = #{type} </if>        <if test="@Ognl@isNotEmpty(plateNum)">AND a.`plateNum` = #{plateNum} </if>        ORDER BY a.updateTime DESC    </select>        <update id="removeById" parameterType="java.lang.Long">        UPDATE oa_car_info SET isDelete=1 WHERE carId=#{carId}    </update></mapper>