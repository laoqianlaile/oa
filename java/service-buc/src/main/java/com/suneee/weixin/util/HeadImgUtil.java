package com.suneee.weixin.util;import javax.imageio.ImageIO;import javax.imageio.ImageReadParam;import javax.imageio.ImageReader;import javax.imageio.stream.ImageInputStream;import java.awt.*;import java.awt.image.BufferedImage;import java.io.File;import java.io.FileInputStream;import java.util.Iterator;/** * @program: bpmx-parent * @description: 头像上传工具类 * @author: liuhai * @create: 2018-08-13 09:21 **/public class HeadImgUtil {    //头像存储路径    private static final String IMGPATH = "/home/headimg/";    /**     * 获取源图片路径     * @param name     * @return     */    public static String createImgPath(String name){        File file = new File(IMGPATH);        if(!file.exists()){            file.mkdirs();        }        return IMGPATH + name;    }    /**     * 切图     * @param sourcePath 源图片路径     * @param cutPath    切后图片路径     * @param ext        图片格式     * @param x          切图x坐标     * @param y          切图y坐标     * @param w 宽     * @param h 高     * @return     * @throws Exception     */    public static String cutImage(String sourcePath, String cutPath, String ext, int x, int y, int w, int h) throws Exception {        // 首先通过ImageIo中的方法，创建一个Image + InputStream到内存        ImageInputStream iis = ImageIO.createImageInputStream(new FileInputStream(sourcePath));        // 再按照指定格式构造一个Reader（Reader不能new的）        Iterator it = ImageIO.getImageReadersBySuffix(ext);        ImageReader reader = (ImageReader)it.next();        // 再通过ImageReader绑定 InputStream        reader.setInput(iis);        // 设置感兴趣的源区域。        ImageReadParam param = reader.getDefaultReadParam();        param.setSourceRegion(new Rectangle(x, y , w, h));        BufferedImage bi = reader.read(0, param);        ImageIO.write(bi, ext, new File(IMGPATH + cutPath));        return IMGPATH + cutPath;    }}